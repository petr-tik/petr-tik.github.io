<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="My blog, ">

        <link rel="alternate"  href="/feeds/all.atom.xml" type="application/atom+xml" title="My blog Full Atom Feed"/>

        <title>Rust - from 0 to productive in 2 weeks // My blog // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/css/pure.css">
    <link rel="stylesheet" href="/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <div class="cover-img" style="background: none repeat scroll 0% 0% #3D4F5D">
                <div class="cover-body">
                    <header class="header">
                        <hgroup>
                            <h1 class="brand-main"><a href="">My blog</a></h1>
                            <p class="tagline"></p>
                                <p class="social">
                                    <a href="https://github.com/petr-tik">
                                        <i class="fa fa-GitHub fa-3x"></i>
                                    </a>
                                    <a href="https://twitter.com/petr_tik">
                                        <i class="fa fa-Twitter fa-3x"></i>
                                    </a>
                                </p>
                        </hgroup>
                    </header>
                </div>
            </div>
        </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Rust - from 0 to productive in 2 weeks</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="/tag/rust.html">rust</a>
                        </p>
                </header>
            </section>
            <h3>tl;dr</h3>
<p>Used to be sarcastic about Rust fan boys. Decided to learn the language to implement a small order book application. Became quickly productive and became interested in optimising the application. Beat the C++ application on benchmarks.</p>
<h3>Introduction</h3>
<p>People who know me well can confirm my smugness when discussing Rust and its powerful advocacy in the developer community. I decided to be more open-minded and use the language for a small project, instead of continusly making fun of it. </p>
<h3>Order book design</h3>
<p>Mine is a toy order book, for big boy MEs - watch <a href="https://www.youtube.com/watch?v=b1e4t2k2KJY">Brian Nigito's talk</a>. It provides 2 types of input and 1 output. </p>
<h3>Problem</h3>
<p>An order book is an application that keeps track of buy and sell orders for different securities. Implement an order book for 1 security. The order book can add new orders and reduce the size of existing orders. At application start-up the order book recieves the target_size. If at any point, there are more bids (buy orders) or asks (sell orders) than the target_size, print a summary to stdout.</p>
<h3>Original design</h3>
<h3>Tooling</h3>
<h4>Derive Love</h4>
<p>The rust compiler allows you to shortcut generating boilerplate for your custom types. I defined a type that was a wrapper around i64. The derive(Hash) macro generated the Hash <code>Trait</code> (interface). </p>
<p>Compiler unwraps Amount into underlying i64 and implements traits for the struct to be used in HashMap and BTreeMap (needs ordering)</p>
<div class="highlight"><pre><span></span><span class="cp">#[derive(Copy, Clone, Debug, Eq, Hash, PartialEq, PartialOrd, Ord)]</span><span class="w"> </span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Amount</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">as_int</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>The biggest gain wasn't time, it was the opportunity to continue solving the problem without context switching to implement hashing.</p>
<h3>Conclusion</h3>
<p>Rust compiler + tooling (racer, completion, documentation) make it easy to become immediately productive. Helpful error messages with detailed explanations of concepts are great. The only minor downside, less related to the language and more to my laziness - the immediate feeling of proficiency with auto-complete gives a false hope that you remember rust APIs and can write anything in it. </p>
<h3>Future work to do</h3>
<p>Learn rust idioms to parametrise classes and methods to avoid repetitive boiler plate
Get better at Error handling inside functions
Implement unit tests using cargo's well-regarded test suite
Learn more about the build system and integration testing.</p>
            <a href="#" class="go-top">Go Top</a>
<footer class="footer">
    <p>&copy; Petr Tikilyaynen &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
    </div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>

</body>
</html>