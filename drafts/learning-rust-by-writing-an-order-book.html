<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="My blog, ">

        <link rel="alternate"  href="/feeds/all.atom.xml" type="application/atom+xml" title="My blog Full Atom Feed"/>

        <title>Learning rust by writing an order book // My blog // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/css/pure.css">
    <link rel="stylesheet" href="/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <div class="cover-img" style="background: none repeat scroll 0% 0% #3D4F5D">
                <div class="cover-body">
                    <header class="header">
                        <hgroup>
                            <h1 class="brand-main"><a href="">My blog</a></h1>
                            <p class="tagline"></p>
                                <p class="social">
                                    <a href="https://github.com/petr-tik">
                                        <i class="fa fa-GitHub fa-3x"></i>
                                    </a>
                                    <a href="https://twitter.com/petr_tik">
                                        <i class="fa fa-Twitter fa-3x"></i>
                                    </a>
                                </p>
                        </hgroup>
                    </header>
                </div>
            </div>
        </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Learning rust by writing an order book</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="/tag/rust.html">rust</a>
                        </p>
                </header>
            </section>
            <h3>Intro</h3>
<p>After making fun of people, who tell everyone to re-write everything in Rust, I have now decided to learn Rust and see what the rave is all about. </p>
<p>People who know me well can confirm my smugness when discussing Rust and its powerful advocacy in the developer community. I decided to be more open-minded and use the language for a small project, before I continue making fun of it.</p>
<h3>Problem</h3>
<p>An order book is a </p>
<h3>Matching Engine design</h3>
<p>Mine is a toy matching engine, for big boy MEs - watch <a href="https://www.youtube.com/watch?v=b1e4t2k2KJY">Brian Nigito's talk</a>. It provides 2 types of input and 1 output. </p>
<h3>Original design</h3>
<p>After glancing through the spec, I googled more information about matching engines, found Martin Thompson's advice on optimising the design by combining bids and asks (as negative bids). Implementing a clever design from the start made me excited, so I quickly implemented it. Later I re-read the spec and realised that I need to track and report 2 sides separately and it makes more sense to split them. </p>
<h3>Conclusion</h3>
<p>Rust compiler + tooling (racer, completion, documentation) make it easy to become immediately productive. Helpful error messages with detailed explanations of concepts are great. The only minor downside, less related to the language and more to my laziness - the immediate feeling of proficiency with auto-complete gives a false hope that you remember rust APIs and can write anything in it. </p>
<h2>Benchmark</h2>
<div class="highlight"><pre><span></span>petr_tik@merluza:~/Coding/order_book/order-book-pricer/src$ <span class="nb">time</span> ../../target/release/order_book <span class="m">200</span> &lt; ../data/pricer.in <span class="p">&amp;</span>&gt; /dev/null 

real    2m41.530s
user    1m39.293s
sys 1m2.143s
petr_tik@merluza:~/Coding/order_book/order-book-pricer/src$ <span class="nb">time</span> ./order-book-pricer <span class="m">200</span> &lt; ../data/pricer.in &gt; /dev/null

real    0m2.552s
user    0m2.485s
sys 0m0.065s
</pre></div>


<h3>Future work to do</h3>
<p>Learn rust idioms to parametrise classes and methods to avoid repetitive boiler plate
Get better at Error handling inside functions
Implement unit tests using cargo's well-regarded test suite
Learn more about the build system and integration testing.</p>
            <a href="#" class="go-top">Go Top</a>
<footer class="footer">
    <p>&copy; Petr Tikilyaynen &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
    </div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>

</body>
</html>